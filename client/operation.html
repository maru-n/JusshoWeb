<template name="operation">
    {{> loginButtons}}

    {{> uploadErrorNotification}}

    <h1>{{name}}</h1>

    <a href="/">戻る</a>
    {{#if isEditPermitted}}
    <a href="/" class='delete'>この作戦を削除</a>
    <a href="" class='delete-all-photos'>全ての写真を削除</a>
    {{/if}}


    {{#if isUploading}}
    <p><strong>
    {{uploadOperation}}にアップロード中（{{uploadedFileNum}}/{{uploadingFileNum}}）
    </strong></p>
    {{else}}
    <form>
        <p><label for="upload-photos">写真をアップロード</label><input type="file" name="upload-photos" class="upload-photos" multiple></p>
    </form>
    {{/if}}

    {{#each photos}}
    {{> photoThumbnail}}
    {{/each}}

</template>

<template name="uploadErrorNotification">
    {{#if isErrorOccured}}
    <p style="color:red;">{{errorOperation}}への以下のファイルのアップロードに失敗しました。<a href="" class='delete-error'>了解</a></p>
    <ul>
    {{#each errorFileNames}}
    <li>{{this}}</li>
    {{/each}}
    </ul>
    {{/if}}
</template>

<template name="photoThumbnail">
    {{#if thumbnail.url}}
    <a href="{{original.url}}" target="_blank">
        <img src="{{thumbnail.url}}" alt="" />
    </a>
    {{/if}}
</template>
